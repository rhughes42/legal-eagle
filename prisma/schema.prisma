// Prisma Database Schema for the Legal Document Management System
// PostgreSQL database with AI-extracted metadata for legal documents

// Dataabase config defaults to port 5432 for PostgreSQL
datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

generator client {
    provider = "prisma-client-js"
}

/**
 * The Document model represents legal documents uploaded to the system.
 * It includes fields for both extracted metadata and AI-generated insights.
 */
model Document {
    id         Int       @id @default(autoincrement())
    fileName   String // Original uploaded filename
    title      String? // [Extracted] Document title
    date       DateTime? // [Extracted] Document date (filing, judgment, etc.)
    court      String? // [Extracted] Court or jurisdiction
    caseNumber String? // [Extracted] Case or docket number
    summary    String? // [Generated] Document summary

    // [Generated] High-level classification
    caseType String? // e.g., civil, criminal, family, intellectual property
    area     String? // e.g., employment, intellectual property, contracts, family law, criminal law

    // [Generated] Area-specific details (flexible key/value JSON data, e.g., compensation, patentNumber, costs, debtAmount)
    areaData Json?

    metadata  Json? // [Generated] Additional AI-extracted metadata
    createdAt DateTime @default(now()) // Record creation timestamp
    updatedAt DateTime @updatedAt // Record update timestamp
}
