// Prisma Database Schema for Pandektes Legal Document Management System
// PostgreSQL database with AI-extracted metadata for legal documents

/**
 * Database Connection
 */
datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

/**
 * Prisma Client Generator
 */
generator client {
    provider = "prisma-client-js"
}

/**
 * Document Model:
 * Represents legal documents with AI-extracted metadata for efficient storage and retrieval.
 */
model Document {
    id         Int       @id @default(autoincrement())
    fileName   String // Original uploaded filename
    title      String? // AI-extracted document title
    date       DateTime? // AI-extracted document date (filing, judgment, etc.)
    court      String? // AI-extracted court or jurisdiction
    caseNumber String? // AI-extracted case or docket number
    summary    String? // AI-generated document summary

    // High-level classification
    caseType String? // e.g., civil, criminal, family, intellectual property
    area     String? // e.g., employment, intellectual property, contracts, family law, criminal law

    // Area-specific details (flexible key/value JSON data, e.g., compensation, patentNumber, costs, debtAmount)
    areaData Json?

    metadata  Json? // Additional AI-extracted metadata
    createdAt DateTime @default(now()) // Record creation timestamp
    updatedAt DateTime @updatedAt // Record update timestamp
}
